<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Palpation Checklist</title>

<style>
    :root{
        --max-width:1000px;
        --accent:#4CAF50;
        --muted:#f7f7f7;
        --card:#ffffff;
        --blue:#0275d8;
        --danger:#d9534f;
        --gold:#f0ad4e;
    }

    body {
        font-family: Arial, sans-serif;
        background: var(--muted);
        max-width: var(--max-width);
        margin: auto;
        color: #222;

        padding-top: 160px;
        padding-left: 20px;
        padding-right: 20px;
    }

    /* Fixed top header */
    #fixedTop {
        position: fixed;
        top: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 100%;
        max-width: var(--max-width);
        background: var(--muted);
        z-index: 999;
        padding: 10px 20px 15px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }

    h1 {
        text-align: center;
        margin: 6px 0 10px 0;
        font-weight: 700;
        font-size: 22px;
    }

    .top-row { display:flex; flex-direction:column; gap:10px; }

    /* Progress bar */
    #progressBarContainer {
        width: 100%;
        background: #ddd;
        border-radius: 12px;
        overflow:hidden;
        height:34px;
    }
    #progressBar {
        height: 34px;
        width: 0%;
        background: var(--accent);
        text-align: center;
        color: white;
        line-height: 34px;
        font-weight: bold;
        transition: width 200ms ease;
    }

    /* Timer */
    #timerBox {
        text-align: center;
        font-size: 22px;
        font-weight: bold;
        padding:8px 12px;
        border-radius:8px;
        background:#fff;
        box-shadow:0 1px 4px rgba(0,0,0,0.08);
    }
    #timerButtons {
        display:flex;
        gap:8px;
        justify-content:center;
        flex-wrap:wrap;
        margin-top:6px;
    }

    button {
        padding: 8px 12px;
        border: none;
        border-radius: 6px;
        background: var(--accent);
        color: white;
        cursor: pointer;
        font-size: 14px;
    }
    .btn-clear { background: var(--danger); }
    .btn-checkall { background: var(--blue); }
    .btn-pause { background: var(--gold); }
    .btn-ghost {
        background: transparent;
        color: #222;
        border: 1px solid #ddd;
    }

    /* Sections */
    .section {
        background: var(--card);
        padding: 18px;
        margin-bottom: 16px;
        border-radius: 10px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.06);
    }
    .section h2 {
        margin: 0 0 10px 0;
        border-left: 6px solid var(--accent);
        padding-left: 12px;
        font-size: 18px;
    }

    /* Task row */
    .task {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 10px 0;
        gap: 12px;
    }

    /* regular checkbox */
    .single-check {
        width: 26px;
        height: 26px;
    }

    /* 1 / 2 double-checkbox layout */
    .double-box {
        display: flex;
        align-items: center;
        gap: 10px;
    }
    .double-box label {
        font-size: 14px;
        font-weight: bold;
    }
    .double-box input[type="checkbox"] {
        width: 24px;
        height: 24px;
    }

    @media (max-width:600px){
        body { padding-left: 12px; padding-right: 12px; }
        h1 { font-size: 20px; }
        #timerBox { font-size: 20px; }
        button { font-size: 13px; }
    }
</style>
</head>

<body>

<!-- FIXED TOP BAR -->
<div id="fixedTop">
    <h1>Palpation Exam Checklist</h1>

    <div class="top-row">
        <div id="progressBarContainer">
            <div id="progressBar">0%</div>
        </div>

        <div style="width:100%; text-align:center;">
            <div id="timerBox">30:00</div>
            <div id="timerButtons">
                <button onclick="startTimer()">Start</button>
                <button class="btn-pause" onclick="pauseTimer()">Pause</button>
                <button class="btn-ghost" onclick="resetTimer()">Reset</button>
            </div>
        </div>
    </div>

    <div style="text-align:center; margin-top:10px;">
        <button class="btn-checkall" onclick="checkAll()">Check All</button>
        <button class="btn-clear" onclick="clearAll()">Clear All</button>
    </div>
</div>

<script>
/* Adjust body padding so fixed header doesn't cover content */
window.addEventListener("load", adjustTopPadding);
window.addEventListener("resize", adjustTopPadding);

function adjustTopPadding() {
    const fixed = document.getElementById("fixedTop");
    if (!fixed) return;
    const headerHeight = fixed.offsetHeight + 10;
    document.body.style.paddingTop = headerHeight + "px";
}
</script>

<script>
/* Timer */
let timer;
let timeLeft = 1800;
let isRunning = false;

function updateTimerDisplay() {
    let min = String(Math.floor(timeLeft / 60)).padStart(2,'0');
    let sec = String(timeLeft % 60).padStart(2,'0');
    document.getElementById('timerBox').innerText = `${min}:${sec}`;
}
function startTimer() {
    if (isRunning) return;
    isRunning = true;
    timer = setInterval(() => {
        if (timeLeft > 0) { timeLeft--; updateTimerDisplay(); }
        else { pauseTimer(); }
    }, 1000);
}
function pauseTimer() { clearInterval(timer); isRunning = false; }
function resetTimer() {
    pauseTimer(); timeLeft = 1800; updateTimerDisplay();
}
</script>

<script>
/* Progress tracking */
function updateProgress() {
    const all = document.querySelectorAll('input[type=checkbox]').length;
    const checked = document.querySelectorAll('input[type=checkbox]:checked').length;
    const percent = Math.round((checked / all) * 100);
    const bar = document.getElementById('progressBar');
    bar.style.width = percent + '%';
    bar.innerText = percent + '%';
}
function checkAll() {
    document.querySelectorAll('input[type=checkbox]').forEach(cb => cb.checked = true);
    updateProgress();
}
function clearAll() {
    document.querySelectorAll('input[type=checkbox]').forEach(cb => cb.checked = false);
    updateProgress();
}
</script>

<script>
/* Section Builder */
let sectionNumber = 1;

function buildTaskRow(labelText, double = false) {
    const row = document.createElement("div");
    row.className = "task";

    const label = document.createElement("div");
    label.className = "label";
    label.innerHTML = labelText;

    row.appendChild(label);

    if (!double) {
        const cb = document.createElement("input");
        cb.type = "checkbox";
        cb.className = "single-check";
        cb.onchange = updateProgress;
        row.appendChild(cb);
    } else {
        const wrap = document.createElement("div");
        wrap.className = "double-box";

        const l1 = document.createElement("label");
        l1.textContent = "1";
        const c1 = document.createElement("input");
        c1.type = "checkbox";
        c1.onchange = updateProgress;

        const l2 = document.createElement("label");
        l2.textContent = "2";
        const c2 = document.createElement("input");
        c2.type = "checkbox";
        c2.onchange = updateProgress;

        wrap.appendChild(l1);
        wrap.appendChild(c1);
        wrap.appendChild(l2);
        wrap.appendChild(c2);

        row.appendChild(wrap);
    }

    return row;
}

function buildSection(title, tasks) {
    const section = document.createElement('div');
    section.className = 'section';

    const h2 = document.createElement('h2');
    h2.textContent = `${sectionNumber}. ${title}`;
    section.appendChild(h2);

    tasks.forEach(t => {
        let row;
        if (t.double) {
            row = buildTaskRow(`<strong>${t.num}.</strong> ${t.text}`, true);
        } else {
            row = buildTaskRow(`<strong>${t.num}.</strong> ${t.text}`, false);
        }
        section.appendChild(row);
    });

    document.body.appendChild(section);
    sectionNumber++;
}
</script>

<!-- BUILD ALL SECTIONS -->
<script>
buildSection("Introduction", [
    { num:1, text:"Set up for Foot Support" },
    { num:2, text:"Set up head stool and pillow" },
    { num:3, text:"Self introduction" },
    { num:4, text:"Ask for consent" }
]);

buildSection("Palpation (Cervical)", [
    { num:1, text:"C1 L / R Anterior" },
    { num:2, text:"C2-7" },
    { num:3, text:"Spine sweep" },
    { num:4, text:"Iliac crest L / R inferior" },
    { num:5, text:"PSIS L / R Superior" },
    { num:6, text:"Patient side-lying position" },

    { num:7, text:"C1 (lateral)", double:true },

    { num:8, text:"C2-7 (lateral)", double:true }
]);

buildSection("Palpation (Pelvic)", [
    { num:1, text:"Leg Long" },
    { num:2, text:"Leg swing" },
    { num:3, text:"Pelvic rotation L / R posterior rotation" },
    { num:4, text:"Pelvic tilt L / R inferior" },
    { num:5, text:"Pelvic torsion L / R ASIS superior" }
]);

buildSection("Palpation (Femur)", [
    { num:1, text:"Leg swing" },
    { num:2, text:"Palpate Greater Trochanters" },
    { num:3, text:"Adjust Greater Trochanters (if required)" }
]);

buildSection("Palpation (Fibula)", [
    { num:1, text:"Leg swing" },
    { num:2, text:"Palpate fibular head" },
    { num:3, text:"Adjust fibular head (if required)" }
]);

buildSection("Foot Mobility", [
    { num:1, text:"Palpate Peroneal Trochlea L / R more protruding" },

    { num:2, text:"Heel Circling", double:true },
    { num:3, text:"Scissor Adjustment ankle joint", double:true },
    { num:4, text:"Foot circling", double:true },
    { num:5, text:"Midtarsal joint mobilization (洗衣機)", double:true },
    { num:6, text:"Midtarsal joint mobilization (扭毛巾)", double:true },
    { num:7, text:"Metatarsal counter mobilization (kitkat)", double:true },
    { num:8, text:"Toes Flexion & Extension", double:true },
    { num:9, text:"Toe Distractions", double:true },
    { num:10, text:"Strokes / Massage Lymphatics", double:true }
]);

buildSection("Anterior Ribs", [
    { num:1, text:"Sternum palpation" },
    { num:2, text:"Anterior rib adjustment (left)" },
    { num:3, text:"Anterior rib adjustment (right)" }
]);

buildSection("Prone", [
    { num:1, text:"Prone Spine Swipe" }
]);

buildSection("123 , 123, 123", [
    { num:1, text:"123 , 123, 123" }
]);

buildSection("Find TP", [
    { num:1, text:"Find TP" }
]);

buildSection("Posterior Ribs", [
    { num:1, text:"Posterior Ribs Palpate" },
    { num:2, text:"Spine Swipe" }
]);

buildSection("Massage", [
    { num:1, text:"Circle Motion x3 times" },
    { num:2, text:"Scrubbing Motion x3 times" },
    { num:3, text:"Herringbone Motion x3 times" },
    { num:4, text:"Stroking Motion x6 times" },
    { num:5, text:"Further sweep" }
]);

buildSection("Palpation (Cervical) — Seated", [
    { num:1, text:"Patient seated Position" },
    { num:2, text:"C1 Atlas" },
    { num:3, text:"C2-7" },
    { num:4, text:"Spine sweep" },
    { num:5, text:"Iliac crest" },
    { num:6, text:"PSIS" }
]);

updateProgress();
</script>

</body>
</html>
